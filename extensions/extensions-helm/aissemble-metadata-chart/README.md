# aiSSEMBLE&trade; Metadata Helm Chart
Baseline Helm chart for packaging and deploying metadata service. Chart is built and managed during the normal Maven build lifecycle and placed in the **target/helm/repo** directory. See https://github.com/kokuwaio/helm-maven-plugin for more details. 

# Basic usage with Helm CLI
To use the module, perform [extension-helm setup](../README.md#leveraging-extensions-helm) and override the chart version with the desired aiSSEMBLE version. For example:
```bash
helm install metadata ghcr.io/boozallen/aissemble-metadata-chart --version <AISSEMBLE-VERSION>
```
**Note**: *the version should match the aiSSEMBLE project version.*

# Properties
| Property                                                 | Description                                                  | Required Override | Default                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|----------------------------------------------------------|--------------------------------------------------------------|-------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| app.name                                                 | Sets label for app.kubernetes.io/name                        | No                | Chart.Name (aissemble-metadata)                                                                                                                                                                                                                                                                                                                                                                                                                  |
| app.version                                              | Sets label for app.kubernetes.io/version                     | No                | Chart.AppVersion (aiSSEMBLE project version)                                                                                                                                                                                                                                                                                                                                                                                                     |
| hostname                                                 | The hostname for the application                             | No                | metadata                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| image.name                                               | The image name                                               | No                | boozallen/aissemble-metadata                                                                                                                                                                                                                                                                                                                                                                                                                     |
| image.imagePullPolicy                                    | The image pull policy                                        | No                | Always (ensures local docker image is pulled, rather than from Nexus repo)                                                                                                                                                                                                                                                                                                                                                                       |
| image.dockerRepo                                         | The image docker repository                                  | No                | NB: OSS: update with aissemble docker repository                                                                                                                                                                                                                                                                                                                                                                                                 |
| image.tag                                                | The image tag                                                | No                | Chart.AppVersion                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| service.spec.ports                                       | The service spec ports                                       | No                | - name: rest-api <br/>&emsp;&emsp;port: 8082 <br/>&emsp;&emsp;targetPort: 8080                                                                                                                                                                                                                                                                                                                                                                   |
| deployment.ports                                         | The deployment ports                                         | No                | - name: http-1 <br/>&emsp;&emsp;containerPort: 8080 <br/>&emsp;&emsp;protocol: TCP                                                                                                                                                                                                                                                                                                                                                               |
| deployment.restartPolicy                                 | The deployment restart policy                                | No                | Always                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ingress.enabled                                          | Enable the external access to the service                    | No                | true                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ingress.metadata.annotations.kubernetes.io/ingress.class | The ingress controller class                                 | No                | nginx                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ingress.hosts                                            | The ingress hosts                                            | No                | - host: metadata-ai.boozallen.github.io <br/>&emsp;&emsp;paths:<br/>&emsp;&emsp;- path:&emsp;&emsp;/<br/>&emsp;&emsp;&emsp;&emsp;pathType: Prefix<br/>&emsp;&emsp;&emsp;&emsp;backend:<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;service:<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;name: metadata<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;port:<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;number:8082 |
| ingress.status                                           | The current state of the ingress                             | No                | 10.192.83.167                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| namespaceOverride                                        | Namespace to deploy to instead of the Helm release namespace | No                | .Release.Namespace                                                                                                                                                                                                                                                                                                                                                                                                                               |

# Migration from aiSSEMBLE v1 Helm Charts
If you are migrating from the v1 version of the metadata chart, use the tables below to apply any existing customizations from the old chart to the new v2 chart.

## Property Location
All properties listed below have been moved to the parent chart. If any properties are set to the default value, we recommend removing them from your values file entirely.

**Note**: *all new property locations include the prefix `aissemble-metadata.`*

## Property Removed
The following properties no longer exist.

| Property                                   | Reason                                                          |                                                                                                                                                                       
|--------------------------------------------|-----------------------------------------------------------------|
| replicaCount                               | This property was ignored in the original chart by default      | 

