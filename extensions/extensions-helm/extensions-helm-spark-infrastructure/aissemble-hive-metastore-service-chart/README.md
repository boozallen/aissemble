# aiSSEMBLE&trade; Hive Metastore Service Helm Chart
Baseline Helm chart for packaging and deploying Hive Metastore Services. Chart is built and managed during the normal Maven build lifecycle and placed in the **target/helm/repo** directory. See https://github.com/kokuwaio/helm-maven-plugin for more details. 

# Basic usage with Helm CLI
To use the module, perform [extension-helm setup](../README.md#leveraging-extensions-helm) and override the chart version with the desired aiSSEMBLE version. For example:
```bash
helm install hive-metastore-service oci://ghcr.io/boozallen/aissemble-hive-metastore-service-chart --version <AISSEMBLE-VERSION>
```
**Note**: *the version should match the aiSSEMBLE project version.*

# Properties
| Property                                        | Description                                                                                                                                             | Required Override | Default                                                                                                                                                                                                                                                                     |
|-------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| app.name                                        | Sets label for app.kubernetes.io/name                                                                                                                   | No                | hive-metastore-service                                                                                                                                                                                                                                                      |
| app.version                                     | Sets label for app.kubernetes.io/version                                                                                                                | No                | Chart.AppVersion (aiSSEMBLE project version)                                                                                                                                                                                                                                |
| replicaCount                                    | Sets desired number of replicas (instances)                                                                                                             | No                | 1                                                                                                                                                                                                                                                                           |
| hostname                                        | The hostname for the application                                                                                                                        | No                | hive-metastore-service                                                                                                                                                                                                                                                      |
| image.name                                      | The image name                                                                                                                                          | Yes               | boozallen/aissemble-hive-service                                                                                                                                                                                                                                            |
| image.imagePullPolicy                           | The image pull policy                                                                                                                                   | No                | IfNotPresent                                                                                                                                                                                                                                                                |
| image.dockerRepo                                | The image docker repository                                                                                                                             | No                | ghcr.io/                                                                                                                                                                                                                                                                    |
| image.tag                                       | The image tag                                                                                                                                           | No                | Chart.AppVersion                                                                                                                                                                                                                                                            |
| deployment.ports                                | The deployment ports                                                                                                                                    | No                | &emsp; - name: "thrift" <br/>&emsp;&emsp;containerPort: 9083                                                                                                                                                                                                                |
| deployment.env                                  | The environment variables for the pod                                                                                                                   | No                | See [values.yaml](./values.yaml)                                                                                                                                                                                                                                            |
| deployment.restartPolicy                        | The deployment restart policy                                                                                                                           | No                | Always                                                                                                                                                                                                                                                                      |
| deployment.volumeMounts                         | The deployment volume mounts                                                                                                                            | No                | &emsp; - name: metastore-service-config <br/>&emsp;&emsp;mountPath: /opt/hive/conf/metastore-site.xml <br/>&emsp;&emsp;subPath: metastore-site.xml                                                                                                                          |
| deployment.volumes                              | The deployment volumes                                                                                                                                  | No                | &emsp; - name: metastore-service-config <br/>&emsp;&emsp;configMap: <br/>&emsp;&emsp;&emsp;name: metastore-service-config <br/>&emsp;&emsp;&emsp;items: <br/>&emsp;&emsp;&emsp;&emsp; - key: metastore-site.xml <br/>&emsp;&emsp;&emsp;&emsp;&emsp;path: metastore-site.xml |
| service.spec.ports                              | The service spec ports                                                                                                                                  | No                | &emsp; - name: "thrift" <br/>&emsp;&emsp;port: 9083 <br/>&emsp;&emsp;targetPort: 9083                                                                                                                                                                                       |
| mysql.enabled                                   | Whether to use mysql as the backing database                                                                                                            | No                | true                                                                                                                                                                                                                                                                        |
| configMap.metastoreServiceConfig.baseProperties | Default configuration for the metastore service                                                                                                         | No                | See [values.yaml](./values.yaml)                                                                                                                                                                                                                                            |
| configMap.metastoreServiceConfig.properties     | Optional configuration for the metastore service. Properties added here will be included in the configuration without overriding the default properties | No                |                                                                                                                                                                                                                                                                             |

# Subchart Overrides
## mysql
See [the official bitnami documentation](https://github.com/bitnami/charts/tree/main/bitnami/mysql) for full configuration options.

| Property         | Default             |
|------------------|---------------------|
| fullnameOverride | "hive-metastore-db" |
| auth.database    | "metastore"         |
